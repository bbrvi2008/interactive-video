!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){var i=n(9),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();e.exports=o},function(e,t,n){var i=n(1).Symbol;e.exports=i},function(e,t,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,e.exports.once=function(e,t){return new Promise((function(n,i){function r(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,r),i(n)},e.once("error",o)),e.once(t,r)}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var u=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function d(e,t,n,i){var r,o,s,c;if(a(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=l(e))>0&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,c=u,console&&console.warn&&console.warn(c)}return e}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=v.bind(i);return r.listener=n,i.wrapFn=r,r}function p(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):m(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return l(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var c=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw c.context=s,c}var u=r[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var a=u.length,l=m(u,a);for(n=0;n<a;++n)o(l[n],this,t)}return!0},c.prototype.addListener=function(e,t){return d(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return d(this,e,t,!0)},c.prototype.once=function(e,t){return a(t),this.on(e,f(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,f(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,i,r,o,s;if(a(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},c.prototype.listeners=function(e){return p(this,e,!0)},c.prototype.rawListeners=function(e){return p(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},c.prototype.listenerCount=h,c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){e.exports=n(17)},function(e,t,n){},function(e,t,n){},function(e,t,n){var i=n(0),r=n(8),o=n(11),s=Math.max,c=Math.min;e.exports=function(e,t,n){var u,a,l,d,v,f,p=0,h=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function b(t){var n=u,i=a;return u=a=void 0,p=t,d=e.apply(i,n)}function w(e){return p=e,v=setTimeout(g,t),h?b(e):d}function _(e){var n=e-f;return void 0===f||n>=t||n<0||m&&e-p>=l}function g(){var e=r();if(_(e))return k(e);v=setTimeout(g,function(e){var n=t-(e-f);return m?c(n,l-(e-p)):n}(e))}function k(e){return v=void 0,y&&u?b(e):(u=a=void 0,d)}function L(){var e=r(),n=_(e);if(u=arguments,a=this,f=e,n){if(void 0===v)return w(f);if(m)return clearTimeout(v),v=setTimeout(g,t),b(f)}return void 0===v&&(v=setTimeout(g,t)),d}return t=o(t)||0,i(n)&&(h=!!n.leading,l=(m="maxWait"in n)?s(o(n.maxWait)||0,t):l,y="trailing"in n?!!n.trailing:y),L.cancel=function(){void 0!==v&&clearTimeout(v),p=0,u=f=a=v=void 0},L.flush=function(){return void 0===v?d:k(r())},L}},function(e,t,n){var i=n(1);e.exports=function(){return i.Date.now()}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(10))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i=n(0),r=n(12),o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,a=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var n=c.test(e);return n||u.test(e)?a(e.slice(2),n?2:8):s.test(e)?NaN:+e}},function(e,t,n){var i=n(13),r=n(16);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==i(e)}},function(e,t,n){var i=n(2),r=n(14),o=n(15),s=i?i.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?r(e):o(e)}},function(e,t,n){var i=n(2),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,c=i?i.toStringTag:void 0;e.exports=function(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var i=!0}catch(e){}var r=s.call(e);return i&&(t?e[c]=n:delete e[c]),r}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){"use strict";n.r(t);n(5),n(6),n(7);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentIndex=0,this.items=t}var t,n,r;return t=e,(n=[{key:"getCurrent",value:function(){var e=this.currentIndex;return this.items[e]}},{key:"next",value:function(){var e=this.currentIndex;return this.items[e+1]?(this.currentIndex=++e,this.items[e]):null}},{key:"prev",value:function(){var e=this.currentIndex;return this.items[e-1]?(this.currentIndex=--e,this.items[e]):null}}])&&i(t.prototype,n),r&&i(t,r),e}(),o=n(3),s=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){e||document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()}var d=function(){function e(t,n,i){var r=this,o=n.question,s=n.answers,u=n.isFullscreen;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_handlePlayClicked",(function(e){return function(t){l(!1),r.view.classList.add("interactive-video--fullscreen"),r.video.play(),e&&e()}})),a(this,"_handleCloseClicked",(function(e){return function(){l(!0),document.body.classList.remove("page-locked"),r.view.classList.remove("interactive-video--fullscreen"),r.video.pause(),e&&e()}})),this.$container=t,this.video=this.createVideo(this.getVideoLink(o.videoLink),i),this.answers=this.createAnswers(s,i),this.view=this.createView(this.video,this.answers,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isFullscreen:u},i))}var t,n,i;return t=e,(n=[{key:"hide",value:function(){this.view.parentNode.removeChild(this.view)}},{key:"show",value:function(){this.$container.appendChild(this.view)}},{key:"getVideoLink",value:function(e){return"https://github.com/bbrvi2008/interactive-video/blob/maxsoft-video".concat(e,"?raw=true")}},{key:"createView",value:function(e,t,n){var i=n.onPlayClicked,r=n.onCloseClicked,o=n.isFullscreen,s=this.createOverlay(),c=this.createButton("play_circle_outline","interactive-video__btn-play"),u=this.createButton("close","interactive-video__btn-close");c.addEventListener("click",this._handlePlayClicked(i)),u.addEventListener("click",this._handleCloseClicked(r));var a=document.createElement("div");a.classList.add("interactive-video__inner"),a.appendChild(e),a.appendChild(c),null!=t&&a.appendChild(t),a.appendChild(s);var l=document.createElement("div");return l.classList.add("interactive-video"),o&&l.classList.add("interactive-video--fullscreen"),l.appendChild(a),l}},{key:"createVideo",value:function(e,t){var n=t.onVideoPlayed,i=document.createElement("video");return i.setAttribute("src",e),i.setAttribute("preload","auto"),i.setAttribute("playsinline",""),i.setAttribute("webkit-playsinline","true"),i.classList.add("interactive-video__video"),i.controls=!1,i.addEventListener("ended",n),i.addEventListener("contextmenu",(function(e){e.preventDefault(),e.stopPropagation()}),!1),i}},{key:"createQuestion",value:function(e){if(!e)return null;var t=document.createElement("h2");t.classList.add("interactive-video__question-title"),t.textContent=e;var n=document.createElement("div");return n.classList.add("interactive-video__question"),n.appendChild(t),n}},{key:"createAnswers",value:function(e,t){var n=this;if(!e)return null;var i=document.createElement("div");return i.classList.add("interactive-video__answer-list"),e.forEach((function(e){var r=n.createAnswer(e,t);i.appendChild(r)})),i}},{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=document.createElement("div");return n.classList.add("material-icons"),t.length&&n.classList.add(t),n.textContent=e,n}},{key:"createOverlay",value:function(){var e=document.createElement("div");e.classList.add("interactive-video__overlay");var t=this.createButton("screen_rotation","interactive-video__overlay-icon"),n=document.createElement("p");return n.classList.add("interactive-video__overlay-text"),n.textContent="Поверните экран",e.appendChild(t),e.appendChild(n),e}},{key:"createAnswer",value:function(e,t){var n=t.onAnswerClick,i=e.text,r=document.createElement("button");return r.classList.add("btn","btn__secondary","interactive-video__answer-item"),r.textContent=i,r.addEventListener("click",(function(t){n(e)})),r}}])&&u(t.prototype,n),i&&u(t,i),e}();function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}var y="simple",b="question",w="event:simple-video-played",_="event:answer-clicked",g="event:play-clicked",k="event:close-clicked",L={questions:[{rank:0,type:"simple",question:{videoLink:"/src/files/Макссофт_1-converted.mp4"}},{rank:1,type:"question",question:{videoLink:"/src/files/ESET_1-converted.mp4"},answers:[{videoLink:"/src/files/ESET_2-converted.mp4",isRight:!1,text:"Маски и перчатки"},{videoLink:"/src/files/ESET_3-converted.mp4",isRight:!0,text:"Комплект для удаленной работы"}]},{rank:2,type:"question",question:{videoLink:"/src/files/SAP_1-converted.mp4"},answers:[{videoLink:"/src/files/SAP_3-converted.mp4",isRight:!0,text:"Да"},{videoLink:"/src/files/SAP_2-converted.mp4",isRight:!1,text:"Нет"}]},{rank:3,type:"question",question:{videoLink:"/src/files/Нанософт_1-converted.mp4"},answers:[{videoLink:"/src/files/Нанософт_3-converted.mp4",isRight:!0,text:"Да"},{videoLink:"/src/files/Нанософт_2-converted.mp4",isRight:!1,text:"Нет"}]},{rank:4,type:"question",question:{videoLink:"/src/files/UserGate_1-converted.mp4"},answers:[{videoLink:"/src/files/UserGate_2-converted.mp4",isRight:!1,text:"Волга"},{videoLink:"/src/files/UserGate_3-converted.mp4",isRight:!0,text:"Катунь"}]},{rank:5,type:"question",question:{videoLink:"/src/files/iSpring_1-converted.mp4"},answers:[{videoLink:"/src/files/iSpring_2-converted.mp4",isRight:!1,text:"Быстрый интернет"},{videoLink:"/src/files/iSpring_3-converted.mp4",isRight:!0,text:"COVID-19"}]},{rank:6,type:"question",question:{videoLink:"/src/files/Kaspersky_1-converted.mp4"},answers:[{videoLink:"/src/files/Kaspersky_3-converted.mp4",isRight:!0,text:"Наталья Касперская"},{videoLink:"/src/files/Kaspersky_2-converted.mp4",isRight:!1,text:"Евгений Касперский"}]},{rank:7,type:"question",question:{videoLink:"/src/files/ABBYY_1-converted.mp4"},answers:[{videoLink:"/src/files/ABBYY_2-converted.mp4",isRight:!1,text:"Пасмурный нос"},{videoLink:"/src/files/ABBYY_3-converted.mp4",isRight:!0,text:"Ясный глаз"}]},{rank:8,type:"simple",question:{videoLink:"/src/files/Макссофт_2-converted.mp4"}}]};new(function(){function e(t,n){var i=this,o=n.questions;n.audio;p(this,e),f(this,"_handleSimpleVideoPlayed",(function(){var e=i.slides.next();e&&i._playSlide(e)})),f(this,"_handleAnswerClicked",(function(e){if(!(i.currentSlide.video.duration-2>i.currentSlide.video.currentTime))if(!e.isRight||e.videoLink){var t=e.isRight?i.createSlideDataFromVideoLink(e.videoLink):i.createSlideDataFromAnswer(e);i._playSlide(t)}else i._handleSimpleVideoPlayed()})),f(this,"_handlePlayClicked",(function(){})),f(this,"_handleCloseClicked",(function(){})),this.$container=t,this.eventEmitter=new s.a,this.slides=new r(o),this.bindEventHandlers()}return m(e,[{key:"show",value:function(){var e=this.slides.getCurrent();this.currentSlide=this.createSlide(this.$container,e),this.currentSlide.show()}},{key:"_playSlide",value:function(e){var t=this;if(!this.intervalId){var n=this.createSlide(this.$container,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({isFullscreen:!0},e));this.intervalId=setInterval((function(){n.video.readyState>0&&(clearInterval(t.intervalId),t.intervalId=null,n.video.play(),n.show(),t.currentSlide.hide(),t.currentSlide=n)}),200)}}},{key:"_handleAudio",value:function(e){var t=e.rank;1==t&&this.audio.play(),6===t&&this.audio.pause()}},{key:"bindEventHandlers",value:function(){this.eventEmitter.on(w,this._handleSimpleVideoPlayed),this.eventEmitter.on(_,this._handleAnswerClicked),this.eventEmitter.on(g,this._handlePlayClicked),this.eventEmitter.on(k,this._handleCloseClicked)}},{key:"createSlide",value:function(e,t){return t.type==y?this.createSimpleSlide(e,t):t.type==b?this.createQuestionSlide(e,t):null}},{key:"createSlideDataFromVideoLink",value:function(e){return{type:y,question:{videoLink:e}}}},{key:"createSlideDataFromAnswer",value:function(e){var t=e.videoLink,n=this.slides.getCurrent(),i=n.answers,r=n.question;return{type:b,question:{text:r.text,videoLink:t},answers:i}}},{key:"createSimpleSlide",value:function(e,t){var n=this;return new d(e,t,{onVideoPlayed:function(){n.eventEmitter.emit(w)},onPlayClicked:function(){n.eventEmitter.emit(g)},onCloseClicked:function(){n.eventEmitter.emit(k)}})}},{key:"createQuestionSlide",value:function(e,t){var n=this,i=new d(e,t,{onAnswerClick:function(e){n.eventEmitter.emit(_,e)},onVideoPlayed:function(){i.answers.classList.remove("hidden")},onPlayClicked:function(){n.eventEmitter.emit(g)},onCloseClicked:function(){n.eventEmitter.emit(k)}});return i.answers.classList.add("hidden"),i}}]),e}())(document.querySelector(".interactive-video-container"),L).show()}]);
//# sourceMappingURL=bundle.js.map